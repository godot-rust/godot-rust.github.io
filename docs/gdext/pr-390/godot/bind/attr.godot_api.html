<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Extension API for Godot classes, used with `#[godot_api]`."><title>godot_api in godot::bind - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="godot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.1 (eb26296b5 2023-08-03)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc attr"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../godot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../godot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In godot::bind</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Attribute Macro <a href="../index.html">godot</a>::<wbr><a href="index.html">bind</a>::<wbr><a class="attr" href="#">godot_api</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>#[godot_api]</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Extension API for Godot classes, used with <code>#[godot_api]</code>.</p>
<p>Helps with adding custom functionality:</p>
<ul>
<li><code>init</code> constructors</li>
<li><code>to_string</code> method</li>
<li>Custom register methods (builder style)</li>
<li>All the lifecycle methods like <code>ready</code>, <code>process</code> etc.</li>
</ul>
<p>These trait are special in that it needs to be used in combination with the <code>#[godot_api]</code>
proc-macro attribute to ensure proper registration of its methods. All methods have
default implementations, so you can select precisely which functionality you want to have.
Those default implementations are never called however, the proc-macro detects what you implement.</p>
<p>Do not call any of these methods directly – they are an interface to Godot. Functionality
described here is available through other means (e.g. <code>init</code> via <code>Gd::new_default</code>).
It is not enough to impl <code>GodotExt</code> to be registered in Godot, for this you should look at
<a href="crate::init::ExtensionLibrary">ExtensionLibrary</a>.</p>
<p>If you wish to create a struct deriving GodotClass, you should impl the trait <Base>Virtual,
for your desired Base (i.e. <code>RefCountedVirtual</code>, <code>NodeVirtual</code>).</p>
<h2 id="examples"><a href="#examples">Examples</a></h2><h3 id="refcounted-as-a-base"><a href="#refcounted-as-a-base"><code>RefCounted</code> as a base</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="attr">#[derive(GodotClass)]
</span><span class="kw">struct </span>MyRef;

<span class="attr">#[godot_api]
</span><span class="kw">impl </span>MyRef {
    <span class="attr">#[func]
    </span><span class="kw">pub fn </span>hello_world(<span class="kw-2">&amp;mut </span><span class="self">self</span>) {
        <span class="macro">godot_print!</span>(<span class="string">&quot;Hello World!&quot;</span>)
    }
}

<span class="attr">#[godot_api]
</span><span class="kw">impl </span>RefCountedVirtual <span class="kw">for </span>MyRef {
    <span class="kw">fn </span>init(<span class="kw">_</span>: Base&lt;RefCounted&gt;) -&gt; <span class="self">Self </span>{
        MyRef
    }
}</code></pre></div>
<p>The following example allows to use MyStruct in GDScript for instance by calling
<code>MyStruct.new().hello_world()</code>.</p>
<p>Note that you have to implement init otherwise you won’t be able to call new or any
other methods from GDScript.</p>
<h3 id="node-as-a-base"><a href="#node-as-a-base"><code>Node</code> as a base</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="attr">#[derive(GodotClass)]
#[class(base=Node)]
</span><span class="kw">pub struct </span>MyNode {
    <span class="attr">#[base]
    </span>base: Base&lt;Node&gt;,
}

<span class="attr">#[godot_api]
</span><span class="kw">impl </span>NodeVirtual <span class="kw">for </span>MyNode {
    <span class="kw">fn </span>init(base: Base&lt;Node&gt;) -&gt; <span class="self">Self </span>{
        MyNode { base }
    }
    <span class="kw">fn </span>ready(<span class="kw-2">&amp;mut </span><span class="self">self</span>) {
        <span class="macro">godot_print!</span>(<span class="string">&quot;Hello World!&quot;</span>);
    }
}</code></pre></div>
</div></details></section></div></main></body></html>