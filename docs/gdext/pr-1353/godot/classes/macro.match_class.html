<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Dispatches a class to different subclasses."><title>match_class in godot::classes - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="godot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (5c7ae0c7e 2025-10-02)" data-channel="nightly" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-828709d0.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">match_class</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../godot/index.html"><img src="https://raw.githubusercontent.com/godot-rust/assets/master/gdext/ferris.svg" alt="logo"></a><h2><a href="../../godot/index.html">godot</a><span class="version">Pull Request #1353</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">match_<wbr>class</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#example" title="Example">Example</a></li><li><a href="#expression-and-control-flow" title="Expression and control flow">Expression and control flow</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In godot::<wbr>classes</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">godot</a>::<wbr><a href="index.html">classes</a></div><h1>Macro <span class="macro">match_<wbr>class</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>macro_rules! match_class {
    ($subject:expr, $($tt:tt)*) =&gt; { ... };
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Dispatches a class to different subclasses.</p>
<p>Similar to a <code>match</code> statement, but with downcasts. Earlier matches dominate, so keep more-derived classes first.
The current implementation checks <a href="../prelude/struct.Gd.html#method.try_cast" title="method godot::prelude::Gd::try_cast"><code>Gd::try_cast()</code></a> linearly with the number of branches.
This may change in the future.</p>
<p>When none of the listed classes match, a <em>fallback branch</em> acts as a catch-all and allows to retrieve the original <code>Gd</code> pointer.
If the type of the <code>match_class!</code> expression is <code>()</code>, you can omit the fallback branch. For all other types, it is required, even if all
direct subclasses are handled. The reason for this is that there may be other subclasses which are not statically known by godot-rust
(e.g. from a script or GDExtension).</p>
<p>The fallback branch can either be <code>_</code> (discard object), or <code>variable</code> to access the original object inside the fallback arm.</p>
<h2 id="example"><a class="doc-anchor" href="#example">ยง</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Basic syntax.
</span><span class="kw">let </span>event: Gd&lt;InputEvent&gt; = some_input();

<span class="kw">let </span>simple_dispatch: i32 = <span class="macro">match_class!</span> { event,
   button @ InputEventMouseButton =&gt; <span class="number">1</span>,
   motion @ InputEventMouseMotion =&gt; <span class="number">2</span>,
   action @ InputEventAction =&gt; <span class="number">3</span>,
   key @ InputEventKey =&gt; <span class="number">4</span>,
   <span class="kw">_ </span>=&gt; <span class="number">0</span>, <span class="comment">// Fallback.
</span>};

<span class="comment">// More diverse dispatch patterns are also supported.
</span><span class="kw">let </span>fancy_dispatch: i32 = <span class="macro">match_class!</span> { some_input(),
    <span class="comment">// Mutable bindings supported:
    </span><span class="kw-2">mut </span>button @ InputEventMouseButton =&gt; <span class="number">1</span>,

    <span class="comment">// Block syntax for multiple statements:
    </span>motion @ InputEventMouseMotion =&gt; {
        <span class="macro">godot_print!</span>(<span class="string">"motion"</span>);
        <span class="number">2
    </span>},

    <span class="comment">// Qualified types supported:
    </span>action @ godot::classes::InputEventAction =&gt; <span class="number">3</span>,

    <span class="comment">// If you're only interested in the class and not the object,
    // discard it with either `_` or `_variable`:
    </span><span class="kw">_ </span>@ InputEventKey =&gt; <span class="number">4</span>,

    <span class="comment">// Fallback with variable -- retrieves original Gd&lt;InputEvent&gt;.
    </span>original =&gt; <span class="number">0</span>,
    <span class="comment">// Can also be used with mut:
    // mut original =&gt; 0,
    // If the match arms have type (), we can also omit the fallback branch.
</span>};

<span class="comment">// event_type is now 0, 1, 2, 3 or 4</span></code></pre></div><h2 id="expression-and-control-flow"><a class="doc-anchor" href="#expression-and-control-flow">ยง</a>Expression and control flow</h2>
<p>The <code>match_class!</code> macro is an expression, as such it has a type. If that type is not <code>()</code>, you typically need to use the expression or
end it with a semicolon.</p>
<p>Control-flow statements like <code>?</code>, <code>return</code>, <code>continue</code>, <code>break</code> can be used within the match arms.</p>
</div></details></section></div></main></body></html>