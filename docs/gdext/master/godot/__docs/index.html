<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Extended documentation"><title>godot::__docs - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-d7a46bd0e1dce774.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="godot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (5affbb171 2024-07-18)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../godot/index.html">godot</a><span class="version">0.1.2</span></h2></div><h2 class="location"><a href="#">Module __docs</a></h2><div class="sidebar-elems"><h2><a href="../index.html">In crate godot</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">godot</a>::<wbr><a class="mod" href="#">__docs</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/godot/__docs.rs.html#8-107">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="extended-documentation"><a class="doc-anchor" href="#extended-documentation">§</a>Extended documentation</h2>
<p>This highlights a few concepts in the public API of the <code>godot</code> crate. They complement information
available on the main crate documentation page and the book.</p>
<h3 id="type-categories"><a class="doc-anchor" href="#type-categories">§</a>Type categories</h3>
<p>Godot is written in C++, which doesn’t have the same strict guarantees about safety and
mutability that Rust does. As a result, not everything in this crate will look and feel
entirely “rusty”. See also <a href="https://godot-rust.github.io/book/contribute/philosophy.html">Philosophy</a>.</p>
<p>Traits such as <code>Clone</code>, <code>PartialEq</code> or <code>PartialOrd</code> are designed to mirror Godot semantics,
except in cases where Rust is stricter (e.g. float ordering). Cloning a type results in the
same observable behavior as assignment or parameter-passing of a GDScript variable.</p>
<p>We distinguish four different kinds of types:</p>
<ol>
<li>
<p><strong>Value types</strong>: <code>i64</code>, <code>f64</code>, and mathematical types like
<a href="../builtin/struct.Vector2.html" title="struct godot::builtin::Vector2"><code>Vector2</code></a> and <a href="../builtin/struct.Color.html" title="struct godot::builtin::Color"><code>Color</code></a>.</p>
<p>These are the simplest to understand and to work with. They implement <code>Clone</code> and often
<code>Copy</code> as well. They are implemented with the same memory layout as their counterparts in
Godot itself, and typically have public fields. <br><br></p>
</li>
<li>
<p><strong>Copy-on-write types</strong>: <a href="../builtin/struct.GString.html" title="struct godot::builtin::GString"><code>GString</code></a>,
<a href="../builtin/struct.StringName.html" title="struct godot::builtin::StringName"><code>StringName</code></a>, and <code>Packed*Array</code> types.</p>
<p>These mostly act like value types, similar to Rust’s own <code>Vec</code>. You can <code>Clone</code> them to get
a full copy of the entire object, as you would expect.</p>
<p>Under the hood in Godot, these types are implemented with copy-on-write, so that data can be
shared until one of the copies needs to be modified. However, this performance optimization
is entirely hidden from the API and you don’t normally need to worry about it. <br><br></p>
</li>
<li>
<p><strong>Reference-counted types</strong>: <a href="../builtin/struct.Array.html" title="struct godot::builtin::Array"><code>Array</code></a>,
<a href="../builtin/struct.Dictionary.html" title="struct godot::builtin::Dictionary"><code>Dictionary</code></a>, and <a href="../obj/struct.Gd.html" title="struct godot::obj::Gd"><code>Gd&lt;T&gt;</code></a> where <code>T</code> inherits
from <a href="../classes/struct.RefCounted.html" title="struct godot::classes::RefCounted"><code>RefCounted</code></a>.</p>
<p>These types may share their underlying data between multiple instances: changes to one
instance are visible in another. They are conceptually similar to <code>Rc&lt;RefCell&lt;...&gt;&gt;</code>.</p>
<p>Since there is no way to prevent or even detect this sharing from Rust, you need to be more
careful when using such types. For example, when iterating over an <code>Array</code>, make sure that
it isn’t being modified at the same time through another reference.</p>
<p><code>Clone::clone()</code> on these types creates a new reference to the same instance, while
type-specific methods such as <a href="../builtin/struct.Array.html#method.duplicate_deep" title="method godot::builtin::Array::duplicate_deep"><code>Array::duplicate_deep()</code></a>
can be used to make actual copies. <br><br></p>
</li>
<li>
<p><strong>Manually managed types</strong>: <a href="../obj/struct.Gd.html" title="struct godot::obj::Gd"><code>Gd&lt;T&gt;</code></a> where <code>T</code> inherits from
<a href="../classes/struct.Object.html" title="struct godot::classes::Object"><code>Object</code></a> but not from <a href="../classes/struct.RefCounted.html" title="struct godot::classes::RefCounted"><code>RefCounted</code></a>;
most notably, this includes all <code>Node</code> classes.</p>
<p>These also share data, but do not use reference counting to manage their memory. Instead,
you must either hand over ownership to Godot (e.g. by adding a node to the scene tree) or
free them manually using <a href="../obj/struct.Gd.html#method.free" title="method godot::obj::Gd::free"><code>Gd::free()</code></a>. <br><br></p>
</li>
</ol>
<h3 id="ergonomics-and-panics"><a class="doc-anchor" href="#ergonomics-and-panics">§</a>Ergonomics and panics</h3>
<p>gdext is designed with usage ergonomics in mind, making it viable for fast prototyping.
Part of this design means that users should not constantly be forced to write code such as
<code>obj.cast::&lt;T&gt;().unwrap()</code>. Instead, they can just write <code>obj.cast::&lt;T&gt;()</code>, which may panic at runtime.</p>
<p>This approach has several advantages:</p>
<ul>
<li>The code is more concise and less cluttered.</li>
<li>Methods like <code>cast()</code> provide very sophisticated panic messages when they fail (e.g. involved
classes), immediately giving you the necessary context for debugging. This is certainly
preferable over a generic <code>unwrap()</code>, and in most cases also over a <code>expect("literal")</code>.</li>
<li>Usually, such methods panicking indicate bugs in the application. For example, you have a static
scene tree, and you <em>know</em> that a node of certain type and name exists. <code>get_node_as::&lt;T&gt;("name")</code>
thus <em>must</em> succeed, or your mental concept is wrong. In other words, there is not much you can
do at runtime to recover from such errors anyway; the code needs to be fixed.</li>
</ul>
<p>Now, there are of course cases where you <em>do</em> want to check certain assumptions dynamically.
Imagine a scene tree that is constructed at runtime, e.g. in a game editor.
This is why the library provides “overloads” for most of these methods that return <code>Option</code> or <code>Result</code>.
Such methods have more verbose names and highlight the attempt, e.g. <code>try_cast()</code>.</p>
<p>To help you identify panicking methods, we use the symbol “⚠️” at the beginning of the documentation;
this should also appear immediately in the auto-completion of your IDE. Note that this warning sign is
not used as a general panic indicator, but particularly for methods which have a <code>Option</code>/<code>Result</code>-based
overload. If you want to know whether and how a method can panic, check if its documentation has a
<em>Panics</em> section.
<br><br></p>
<h3 id="thread-safety"><a class="doc-anchor" href="#thread-safety">§</a>Thread safety</h3>
<p><a href="https://docs.godotengine.org/en/latest/tutorials/performance/thread_safe_apis.html">Godot’s own thread safety
rules</a>
apply. Types in this crate implement (or don’t implement) <code>Send</code> and <code>Sync</code> wherever
appropriate, but the Rust compiler cannot check what happens to an object through C++ or
GDScript.</p>
<p>As a rule of thumb, if you must use threading, prefer to use <a href="https://doc.rust-lang.org/std/thread">Rust threads</a>
over Godot threads.</p>
<p>The Cargo feature <code>experimental-threads</code> provides experimental support for multithreading. The underlying safety
rules are still being worked out, as such you may encounter unsoundness and an unstable API.</p>
</div></details></section></div></main></body></html>