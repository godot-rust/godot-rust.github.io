<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The gdext library implements Rust bindings for GDExtension, the C API of Godot 4."><title>godot - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-081576b923113409.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="godot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0-nightly (3a36386dc 2024-04-25)" data-channel="nightly" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-e32f0c247825364d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../godot/index.html">godot</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../godot/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">godot</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/godot/lib.rs.html#1-223">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The <strong>gdext</strong> library implements Rust bindings for GDExtension, the C API of <a href="https://godotengine.org">Godot 4</a>.</p>
<p>This documentation is a work in progress.</p>
<h2 id="type-categories"><a class="doc-anchor" href="#type-categories">§</a>Type categories</h2>
<p>Godot is written in C++, which doesn’t have the same strict guarantees about safety and
mutability that Rust does. As a result, not everything in this crate will look and feel
entirely “rusty”. See also <a href="https://godot-rust.github.io/book/contribute/philosophy.html">Philosophy</a>.</p>
<p>Traits such as <code>Clone</code>, <code>PartialEq</code> or <code>PartialOrd</code> are designed to mirror Godot semantics,
except in cases where Rust is stricter (e.g. float ordering). Cloning a type results in the
same observable behavior as assignment or parameter-passing of a GDScript variable.</p>
<p>We distinguish four different kinds of types:</p>
<ol>
<li>
<p><strong>Value types</strong>: <code>i64</code>, <code>f64</code>, and mathematical types like
<a href="builtin/struct.Vector2.html" title="struct godot::builtin::Vector2"><code>Vector2</code></a> and <a href="builtin/struct.Color.html" title="struct godot::builtin::Color"><code>Color</code></a>.</p>
<p>These are the simplest to understand and to work with. They implement <code>Clone</code> and often
<code>Copy</code> as well. They are implemented with the same memory layout as their counterparts in
Godot itself, and typically have public fields. <br><br></p>
</li>
<li>
<p><strong>Copy-on-write types</strong>: <a href="builtin/struct.GString.html" title="struct godot::builtin::GString"><code>GString</code></a>,
<a href="builtin/struct.StringName.html" title="struct godot::builtin::StringName"><code>StringName</code></a>, and <code>Packed*Array</code> types.</p>
<p>These mostly act like value types, similar to Rust’s own <code>Vec</code>. You can <code>Clone</code> them to get
a full copy of the entire object, as you would expect.</p>
<p>Under the hood in Godot, these types are implemented with copy-on-write, so that data can be
shared until one of the copies needs to be modified. However, this performance optimization
is entirely hidden from the API and you don’t normally need to worry about it. <br><br></p>
</li>
<li>
<p><strong>Reference-counted types</strong>: <a href="builtin/struct.Array.html" title="struct godot::builtin::Array"><code>Array</code></a>,
<a href="builtin/struct.Dictionary.html" title="struct godot::builtin::Dictionary"><code>Dictionary</code></a>, and <a href="obj/struct.Gd.html" title="struct godot::obj::Gd"><code>Gd&lt;T&gt;</code></a> where <code>T</code> inherits
from <a href="engine/struct.RefCounted.html" title="struct godot::engine::RefCounted"><code>RefCounted</code></a>.</p>
<p>These types may share their underlying data between multiple instances: changes to one
instance are visible in another. They are conceptually similar to <code>Rc&lt;RefCell&lt;...&gt;&gt;</code>.</p>
<p>Since there is no way to prevent or even detect this sharing from Rust, you need to be more
careful when using such types. For example, when iterating over an <code>Array</code>, make sure that
it isn’t being modified at the same time through another reference.</p>
<p><code>Clone::clone()</code> on these types creates a new reference to the same instance, while
type-specific methods such as <a href="builtin/struct.Array.html#method.duplicate_deep" title="method godot::builtin::Array::duplicate_deep"><code>Array::duplicate_deep()</code></a>
can be used to make actual copies. <br><br></p>
</li>
<li>
<p><strong>Manually managed types</strong>: <a href="obj/struct.Gd.html" title="struct godot::obj::Gd"><code>Gd&lt;T&gt;</code></a> where <code>T</code> inherits from
<a href="engine/struct.Object.html" title="struct godot::engine::Object"><code>Object</code></a> but not from <a href="engine/struct.RefCounted.html" title="struct godot::engine::RefCounted"><code>RefCounted</code></a>;
most notably, this includes all <code>Node</code> classes.</p>
<p>These also share data, but do not use reference counting to manage their memory. Instead,
you must either hand over ownership to Godot (e.g. by adding a node to the scene tree) or
free them manually using <a href="obj/struct.Gd.html#method.free" title="method godot::obj::Gd::free"><code>Gd::free()</code></a>. <br><br></p>
</li>
</ol>
<h2 id="ergonomics-and-panics"><a class="doc-anchor" href="#ergonomics-and-panics">§</a>Ergonomics and panics</h2>
<p>gdext is designed with usage ergonomics in mind, making it viable for fast prototyping.
Part of this design means that users should not constantly be forced to write code such as
<code>obj.cast::&lt;T&gt;().unwrap()</code>. Instead, they can just write <code>obj.cast::&lt;T&gt;()</code>, which may panic at runtime.</p>
<p>This approach has several advantages:</p>
<ul>
<li>The code is more concise and less cluttered.</li>
<li>Methods like <code>cast()</code> provide very sophisticated panic messages when they fail (e.g. involved
classes), immediately giving you the necessary context for debugging. This is certainly
preferable over a generic <code>unwrap()</code>, and in most cases also over a <code>expect(&quot;literal&quot;)</code>.</li>
<li>Usually, such methods panicking indicate bugs in the application. For example, you have a static
scene tree, and you <em>know</em> that a node of certain type and name exists. <code>get_node_as::&lt;T&gt;(&quot;name&quot;)</code>
thus <em>must</em> succeed, or your mental concept is wrong. In other words, there is not much you can
do at runtime to recover from such errors anyway; the code needs to be fixed.</li>
</ul>
<p>Now, there are of course cases where you <em>do</em> want to check certain assumptions dynamically.
Imagine a scene tree that is constructed at runtime, e.g. in a game editor.
This is why the library provides “overloads” for most of these methods that return <code>Option</code> or <code>Result</code>.
Such methods have more verbose names and highlight the attempt, e.g. <code>try_cast()</code>.</p>
<p>To help you identify panicking methods, we use the symbol “⚠️” at the beginning of the documentation;
this should also appear immediately in the auto-completion of your IDE. Note that this warning sign is
not used as a general panic indicator, but particularly for methods which have a <code>Option</code>/<code>Result</code>-based
overload. If you want to know whether and how a method can panic, check if its documentation has a
<em>Panics</em> section.</p>
<h2 id="thread-safety"><a class="doc-anchor" href="#thread-safety">§</a>Thread safety</h2>
<p><a href="https://docs.godotengine.org/en/latest/tutorials/performance/thread_safe_apis.html">Godot’s own thread safety
rules</a>
apply. Types in this crate implement (or don’t implement) <code>Send</code> and <code>Sync</code> wherever
appropriate, but the Rust compiler cannot check what happens to an object through C++ or
GDScript.</p>
<p>As a rule of thumb, if you must use threading, prefer to use <a href="https://doc.rust-lang.org/std/thread">Rust threads</a>
over Godot threads.</p>
<p>The Cargo feature <code>experimental-threads</code> provides experimental support for multithreading. The underlying safety
rules are still being worked out, as such you may encounter unsoundness and an unstable API.</p>
<h2 id="cargo-features"><a class="doc-anchor" href="#cargo-features">§</a>Cargo features</h2>
<p>The following features can be enabled for this crate. All off them are off by default.</p>
<p>Avoid <code>default-features = false</code> unless you know exactly what you are doing; it will disable some required internal features.</p>
<ul>
<li>
<p><strong><code>double-precision</code></strong></p>
<p>Use <code>f64</code> instead of <code>f32</code> for the floating-point type <a href="builtin/type.real.html" title="type godot::builtin::real"><code>real</code></a>. Requires Godot to be compiled with the
scons flag <code>precision=double</code>.<br><br></p>
</li>
<li>
<p><strong><code>custom-godot</code></strong></p>
<p>Use a custom Godot build instead of the latest official release. This is useful when you like to use a
version compiled yourself, with custom flags.</p>
<p>If you simply want to use a different official release, use this pattern instead (here e.g. for version <code>4.0</code>):</p>
<div class="example-wrap"><pre class="language-toml"><code># Trick Cargo into seeing a different URL; https://github.com/rust-lang/cargo/issues/5478
[patch.&quot;https://github.com/godot-rust/godot4-prebuilt&quot;]
godot4-prebuilt = { git = &quot;https://github.com//godot-rust/godot4-prebuilt&quot;, branch = &quot;4.0&quot;}
</code></pre></div><br>
</li>
<li>
<p><strong><code>serde</code></strong></p>
<p>Implement the <a href="https://serde.rs/">serde</a> traits <code>Serialize</code> and <code>Deserialize</code> traits for certain built-in types.
The serialized representation underlies <strong>no stability guarantees</strong> and may change at any time, even without a SemVer-breaking change.
<br><br></p>
</li>
<li>
<p><strong><code>lazy-function-tables</code></strong></p>
<p>Instead of loading all engine function pointers at startup, load them lazily on first use. This reduces startup time and RAM usage, but
incurs additional overhead in each FFI call. Also, you lose the guarantee that once the library has booted, all function pointers are
truly available. Function calls may thus panic only at runtime, possibly in deeply nested code paths.
This feature is not yet thread-safe and can thus not be combined with <code>experimental-threads</code>.<br><br></p>
</li>
<li>
<p><strong><code>formatted</code></strong></p>
<p>Format the generated binding code with a custom-built formatter, which aims to strike a balance between runtime and human readability.
rustfmt generates nice output, but it is unfortunately excessively slow across hundreds of Godot classes.<br><br></p>
</li>
<li>
<p><strong><code>experimental-threads</code></strong></p>
<p>Experimental threading support. This enables <code>Send</code>/<code>Sync</code> traits for <code>Gd&lt;T&gt;</code> and makes the guard types <code>Gd</code>/<code>GdMut</code> aware of
multi-threaded references. There safety aspects are not ironed out yet; there is a high risk of unsoundness at the moment.
As this evolves, it is very likely that the API becomes more strict.<br><br></p>
</li>
<li>
<p><strong><code>experimental-godot-api</code></strong></p>
<p>Access to <code>godot::engine</code> APIs that Godot marks “experimental”. These are under heavy development and may change at any time.
If you opt in to this feature, expect breaking changes at compile and runtime.<br><br></p>
</li>
<li>
<p><strong><code>experimental-wasm</code></strong></p>
<p>Support for WebAssembly exports is still a work-in-progress and is not yet well tested. This feature is in place for users
to explicitly opt-in to any instabilities or rough edges that may result. Due to a limitation in Godot, it might currently not
work Firefox browser.<br><br></p>
</li>
</ul>
<h2 id="public-api"><a class="doc-anchor" href="#public-api">§</a>Public API</h2>
<p>Some symbols in the API are not intended for users, however Rust’s visibility feature is not strong enough to express that in all cases
(for example, proc-macros and separated crates may need access to internals).</p>
<p>The following API symbols are considered private:</p>
<ul>
<li>Symbols annotated with <code>#[doc(hidden)]</code>.</li>
<li>Any of the dependency crates (crate <code>godot</code> is the only public interface).</li>
<li>Modules named <code>private</code> and all their contents.</li>
</ul>
<p>Being private means a workflow is not supported. As such, there are <strong>no guarantees</strong> regarding API stability, robustness or correctness.
Problems arising from using such APIs are not considered bugs, and anything relying on them may stop working without announcement.
Please refrain from using undocumented and private features; if you are missing certain functionality, bring it up for discussion instead.
This allows us to decide whether it fits the scope of the library and to design proper APIs for it.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="builtin/index.html" title="mod godot::builtin">builtin</a></div><div class="desc docblock-short">Built-in types like <code>Vector2</code>, <code>GString</code> and <code>Variant</code>.</div></li><li><div class="item-name"><a class="mod" href="engine/index.html" title="mod godot::engine">engine</a></div><div class="desc docblock-short">Maps the Godot class API to Rust.</div></li><li><div class="item-name"><a class="mod" href="init/index.html" title="mod godot::init">init</a></div><div class="desc docblock-short">Entry point and global init/shutdown of the library.</div></li><li><div class="item-name"><a class="mod" href="log/index.html" title="mod godot::log">log</a></div><div class="desc docblock-short">Printing and logging functionality.</div></li><li><div class="item-name"><a class="mod" href="obj/index.html" title="mod godot::obj">obj</a></div><div class="desc docblock-short">Types and traits related to objects.</div></li><li><div class="item-name"><a class="mod" href="prelude/index.html" title="mod godot::prelude">prelude</a></div><div class="desc docblock-short">Often-imported symbols.</div></li><li><div class="item-name"><a class="mod" href="register/index.html" title="mod godot::register">register</a></div><div class="desc docblock-short">Register/export Rust symbols to Godot: classes, methods, enums…</div></li></ul></section></div></main></body></html>