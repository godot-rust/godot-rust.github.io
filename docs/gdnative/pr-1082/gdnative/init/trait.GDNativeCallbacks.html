<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait for declaring library-level GDNative callbacks. See module-level docs for examples."><title>GDNativeCallbacks in gdnative::init - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-b25d77b18a16a9a4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="gdnative" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0-nightly (5aea14073 2024-08-20)" data-channel="nightly" data-search-js="search-ef54e092fea9c776.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-cb0df477c2d67d00.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../gdnative/index.html"><img src="https://github.com/godot-rust/gdnative/raw/master/assets/godot-ferris.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../gdnative/index.html"><img src="https://github.com/godot-rust/gdnative/raw/master/assets/godot-ferris.svg" alt="logo"></a><h2><a href="../../gdnative/index.html">gdnative</a><span class="version">0.11.3</span></h2></div><h2 class="location"><a href="#">GDNative<wbr>Callbacks</a></h2><div class="sidebar-elems"><section><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.gdnative_init">gdnative_init</a></li><li><a href="#method.gdnative_singleton">gdnative_singleton</a></li><li><a href="#method.gdnative_terminate">gdnative_terminate</a></li><li><a href="#method.nativescript_frame">nativescript_frame</a></li><li><a href="#method.nativescript_init">nativescript_init</a></li><li><a href="#method.nativescript_terminate">nativescript_terminate</a></li><li><a href="#method.nativescript_thread_enter">nativescript_thread_enter</a></li><li><a href="#method.nativescript_thread_exit">nativescript_thread_exit</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In gdnative::<wbr>init</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">gdnative</a>::<wbr><a href="index.html">init</a>::<wbr><a class="trait" href="#">GDNativeCallbacks</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait GDNativeCallbacks: TheGDNativeCallbacksAttributeIsRequired {
    // Provided methods
    fn <a href="#method.gdnative_init" class="fn">gdnative_init</a>(info: <a class="struct" href="struct.InitializeInfo.html" title="struct gdnative::init::InitializeInfo">InitializeInfo</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.gdnative_terminate" class="fn">gdnative_terminate</a>(info: <a class="struct" href="struct.TerminateInfo.html" title="struct gdnative::init::TerminateInfo">TerminateInfo</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.gdnative_singleton" class="fn">gdnative_singleton</a>() { ... }
<span class="item-spacer"></span>    fn <a href="#method.nativescript_init" class="fn">nativescript_init</a>(handle: <a class="struct" href="struct.InitHandle.html" title="struct gdnative::init::InitHandle">InitHandle</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.nativescript_terminate" class="fn">nativescript_terminate</a>(handle: <a class="struct" href="struct.TerminateHandle.html" title="struct gdnative::init::TerminateHandle">TerminateHandle</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.nativescript_frame" class="fn">nativescript_frame</a>() { ... }
<span class="item-spacer"></span>    fn <a href="#method.nativescript_thread_enter" class="fn">nativescript_thread_enter</a>() { ... }
<span class="item-spacer"></span>    fn <a href="#method.nativescript_thread_exit" class="fn">nativescript_thread_exit</a>() { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait for declaring library-level GDNative callbacks. See module-level docs for examples.</p>
<p>Each end-user library must contain one and exactly one implementation of this trait.
It must be annotated with the <a href="attr.callbacks.html" title="attr gdnative::init::callbacks"><code>#[gdnative::init::callbacks]</code></a>
proc-macro attribute.</p>
<p>The most commonly useful callback to implement is <a href="trait.GDNativeCallbacks.html#method.nativescript_init" title="associated function gdnative_core::init::GDNativeCallbacks::nativescript_init::nativescript_init"><code>Self::nativescript_init</code></a>, which allows
the implementor to manually register <a href="../export/trait.NativeClass.html" title="trait gdnative::export::NativeClass"><code>NativeClass</code></a> types so
they can be used from Godot.</p>
<p>An alternative to manual registration is the <code>inventory</code> feature, which automatically
registers derived <a href="../export/trait.NativeClass.html" title="trait gdnative::export::NativeClass"><code>NativeClass</code></a> on
<a href="https://github.com/dtolnay/inventory#how-it-works">supported platforms</a>, which at the time of writing includes every platform
that Godot officially supports except WASM.</p>
<p>For all callbacks in this trait, it’s guaranteed that the Godot API is available when called.</p>
<h3 id="example"><a class="doc-anchor" href="#example">§</a>Example</h3>
<p>With manual registration:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>gdnative::prelude::<span class="kw-2">*</span>;

<span class="attr">#[derive(NativeClass)]
</span><span class="kw">struct </span>HelloWorld { <span class="comment">/* ... */ </span>}

<span class="attr">#[methods]
</span><span class="kw">impl </span>HelloWorld { <span class="comment">/* ... */ </span>}

<span class="kw">struct </span>MyLibrary;

<span class="attr">#[gdnative::init::callbacks]
</span><span class="kw">impl </span>GDNativeCallbacks <span class="kw">for </span>MyLibrary {
    <span class="kw">fn </span>nativescript_init(handle: InitHandle) {
        handle.add_class::&lt;HelloWorld&gt;();
    }
}</code></pre></div>
<p>With automatic registration:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>gdnative::prelude::<span class="kw-2">*</span>;

<span class="attr">#[derive(NativeClass)]
</span><span class="kw">struct </span>HelloWorld { <span class="comment">/* ... */ </span>}

<span class="attr">#[methods]
</span><span class="kw">impl </span>HelloWorld { <span class="comment">/* ... */ </span>}

<span class="kw">struct </span>MyLibrary;

<span class="attr">#[gdnative::init::callbacks]
</span><span class="kw">impl </span>GDNativeCallbacks <span class="kw">for </span>MyLibrary {}</code></pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code></code></pre></div>
</div></details><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.gdnative_init" class="method"><h4 class="code-header">fn <a href="#method.gdnative_init" class="fn">gdnative_init</a>(info: <a class="struct" href="struct.InitializeInfo.html" title="struct gdnative::init::InitializeInfo">InitializeInfo</a>)</h4></section></summary><div class="docblock"><p>Callback invoked on startup, before any other callbacks.</p>
<p>At the time <a href="trait.GDNativeCallbacks.html#method.gdnative_init" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_init::gdnative_init"><code>Self::gdnative_init</code></a> is called, it is guaranteed that:</p>
<ul>
<li>No API callbacks have been invoked before.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.gdnative_terminate" class="method"><h4 class="code-header">fn <a href="#method.gdnative_terminate" class="fn">gdnative_terminate</a>(info: <a class="struct" href="struct.TerminateInfo.html" title="struct gdnative::init::TerminateInfo">TerminateInfo</a>)</h4></section></summary><div class="docblock"><p>Callback invoked on shutdown, after all other callbacks.</p>
<p>At the time <a href="trait.GDNativeCallbacks.html#method.gdnative_terminate" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_terminate::gdnative_terminate"><code>Self::gdnative_terminate</code></a> is called, it is guaranteed that:</p>
<ul>
<li>No API callbacks will be invoked after.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.gdnative_singleton" class="method"><h4 class="code-header">fn <a href="#method.gdnative_singleton" class="fn">gdnative_singleton</a>()</h4></section></summary><div class="docblock"><p>Callback invoked after startup, immediately after <code>gdnative_init</code>, if the <code>singleton</code>
option is set for the <code>GDNativeLibrary</code> resource.</p>
<p><strong>Attention:</strong> This is <strong>NOT</strong> what you’re looking for! <code>gdnative_singleton</code> has nothing
to do with exposing “singleton” objects or static-looking methods to GDScript. Instead,
create a <a href="../export/trait.NativeClass.html" title="trait gdnative::export::NativeClass"><code>NativeClass</code></a> inheriting <code>Node</code> and make that an
auto-load in your project settings. See <a href="https://godot-rust.github.io/book/gdnative/faq/code.html#can-i-implement-static-methods-in-gdnative">the FAQ</a> for an example.</p>
<p>Despite the confusing name, what the <code>singleton</code> option does is to mark the GDNative
library for automatic initialization at the startup of the application before any game
content and scripts are loaded, which might be useful in some use cases. The extra
callback itself doesn’t have any special qualities.</p>
<p>At the time <a href="trait.GDNativeCallbacks.html#method.gdnative_singleton" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_singleton::gdnative_singleton"><code>Self::gdnative_singleton</code></a> is called, it is guaranteed that:</p>
<ul>
<li><a href="trait.GDNativeCallbacks.html#method.gdnative_init" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_init::gdnative_init"><code>Self::gdnative_init</code></a> has been invoked exactly once, immediately before.</li>
<li>No other API callbacks have been invoked.</li>
</ul>
<p>It is NOT guaranteed that:</p>
<ul>
<li>There are any practical uses to this callback. <strong>You do not need this to create a
singleton object, nor does it help you.</strong> Use an <a href="https://godot-rust.github.io/book/gdnative/faq/code.html#can-i-implement-static-methods-in-gdnative">auto-load singleton</a>
instead.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.nativescript_init" class="method"><h4 class="code-header">fn <a href="#method.nativescript_init" class="fn">nativescript_init</a>(handle: <a class="struct" href="struct.InitHandle.html" title="struct gdnative::init::InitHandle">InitHandle</a>)</h4></section></summary><div class="docblock"><p>Callback invoked after startup, before <code>NativeScript</code>s are registered.</p>
<p>At the time <a href="trait.GDNativeCallbacks.html#method.nativescript_init" title="associated function gdnative_core::init::GDNativeCallbacks::nativescript_init::nativescript_init"><code>Self::nativescript_init</code></a> is called, it is guaranteed that:</p>
<ul>
<li><a href="trait.GDNativeCallbacks.html#method.gdnative_init" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_init::gdnative_init"><code>Self::gdnative_init</code></a> has been invoked exactly once.</li>
</ul>
<p>It is NOT guaranteed that:</p>
<ul>
<li>This is immediately invoked after <a href="trait.GDNativeCallbacks.html#method.gdnative_init" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_init::gdnative_init"><code>Self::gdnative_init</code></a>.</li>
<li><a href="trait.GDNativeCallbacks.html#method.nativescript_init" title="associated function gdnative_core::init::GDNativeCallbacks::nativescript_init::nativescript_init"><code>Self::nativescript_init</code></a> has not been invoked before.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.nativescript_terminate" class="method"><h4 class="code-header">fn <a href="#method.nativescript_terminate" class="fn">nativescript_terminate</a>(handle: <a class="struct" href="struct.TerminateHandle.html" title="struct gdnative::init::TerminateHandle">TerminateHandle</a>)</h4></section></summary><div class="docblock"><p>Callback invoked during engine cleanup if NativeScript has been used and the library
is still loaded.</p>
<p>Despite the naming, this is not guaranteed to be paired with <a href="trait.GDNativeCallbacks.html#method.nativescript_init" title="associated function gdnative_core::init::GDNativeCallbacks::nativescript_init::nativescript_init"><code>Self::nativescript_init</code></a>.
Godot may terminate (and later re-initialize) the library without calling this function
due to hot-reloading.</p>
<p>While a handle argument is provided by the engine, its purpose is currently unclear.</p>
<p>At the time <a href="trait.GDNativeCallbacks.html#method.nativescript_terminate" title="associated function gdnative_core::init::GDNativeCallbacks::nativescript_terminate::nativescript_terminate"><code>Self::nativescript_terminate</code></a> is called, it is guaranteed that:</p>
<ul>
<li><a href="trait.GDNativeCallbacks.html#method.gdnative_init" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_init::gdnative_init"><code>Self::gdnative_init</code></a> has been invoked exactly once.</li>
<li><a href="trait.GDNativeCallbacks.html#method.nativescript_init" title="associated function gdnative_core::init::GDNativeCallbacks::nativescript_init::nativescript_init"><code>Self::nativescript_init</code></a> has been invoked at least once.</li>
</ul>
<p>It is NOT guaranteed that:</p>
<ul>
<li>This will always be called before <a href="trait.GDNativeCallbacks.html#method.gdnative_terminate" title="associated function gdnative_core::init::GDNativeCallbacks::gdnative_terminate::gdnative_terminate"><code>Self::gdnative_terminate</code></a>.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.nativescript_frame" class="method"><h4 class="code-header">fn <a href="#method.nativescript_frame" class="fn">nativescript_frame</a>()</h4></section></summary><div class="docblock"><p>Callback invoked every frame if any NativeScripts are being used.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.nativescript_thread_enter" class="method"><h4 class="code-header">fn <a href="#method.nativescript_thread_enter" class="fn">nativescript_thread_enter</a>()</h4></section></summary><div class="docblock"><p>Callback invoked before a thread managed by Godot other than the main thread is entered,
if any NativeScripts are being used.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.nativescript_thread_exit" class="method"><h4 class="code-header">fn <a href="#method.nativescript_thread_exit" class="fn">nativescript_thread_exit</a>()</h4></section></summary><div class="docblock"><p>Callback invoked after a thread managed by Godot other than the main thread has been
exited from, if any NativeScripts are being used.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/gdnative_core/init/trait.GDNativeCallbacks.js" async></script></section></div></main></body></html>