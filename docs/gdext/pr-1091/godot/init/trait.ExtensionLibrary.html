<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Defines the entry point for a GDExtension Rust library."><title>ExtensionLibrary in godot::init - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-916cea96.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="godot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0-nightly (1aeb99d24 2025-03-19)" data-channel="nightly" data-search-js="search-e7298875.js" data-settings-js="settings-d72f25bb.js" ><script src="../../static.files/storage-d8ac8691.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-fb8c74a8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../godot/index.html"><img src="https://raw.githubusercontent.com/godot-rust/assets/master/gdext/ferris.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../godot/index.html"><img src="https://raw.githubusercontent.com/godot-rust/assets/master/gdext/ferris.svg" alt="logo"></a><h2><a href="../../godot/index.html">godot</a><span class="version">0.2.4</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Extension<wbr>Library</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#example" title="Example">Example</a></li><li><a href="#custom-entry-symbol" title="Custom entry symbol">Custom entry symbol</a></li><li><a href="#safety" title="Safety">Safety</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.editor_run_behavior" title="editor_run_behavior">editor_run_behavior</a></li><li><a href="#method.min_level" title="min_level">min_level</a></li><li><a href="#method.on_level_deinit" title="on_level_deinit">on_level_deinit</a></li><li><a href="#method.on_level_init" title="on_level_init">on_level_init</a></li><li><a href="#method.override_hot_reload" title="override_hot_reload">override_hot_reload</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In godot::<wbr>init</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">godot</a>::<wbr><a href="index.html">init</a></div><h1>Trait <span class="trait">ExtensionLibrary</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub unsafe trait ExtensionLibrary {
    // Provided methods
    fn <a href="#method.editor_run_behavior" class="fn">editor_run_behavior</a>() -&gt; <a class="enum" href="enum.EditorRunBehavior.html" title="enum godot::init::EditorRunBehavior">EditorRunBehavior</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.min_level" class="fn">min_level</a>() -&gt; InitLevel { ... }
<span class="item-spacer"></span>    fn <a href="#method.on_level_init" class="fn">on_level_init</a>(level: InitLevel) { ... }
<span class="item-spacer"></span>    fn <a href="#method.on_level_deinit" class="fn">on_level_deinit</a>(level: InitLevel) { ... }
<span class="item-spacer"></span>    fn <a href="#method.override_hot_reload" class="fn">override_hot_reload</a>() -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Defines the entry point for a GDExtension Rust library.</p>
<p>Every library should have exactly one implementation of this trait. It is always used in combination with the
<a href="attr.gdextension.html"><code>#[gdextension]</code></a> proc-macro attribute.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<p>The simplest usage is as follows. This will automatically perform the necessary init and cleanup routines, and register
all classes marked with <code>#[derive(GodotClass)]</code>, without needing to mention them in a central list. The order in which
classes are registered is not specified.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>godot::init::<span class="kw-2">*</span>;

<span class="comment">// This is just a type tag without any functionality.
// Its name is irrelevant.
</span><span class="kw">struct </span>MyExtension;

<span class="attr">#[gdextension]
</span><span class="kw">unsafe impl </span>ExtensionLibrary <span class="kw">for </span>MyExtension {}</code></pre></div>
<h2 id="custom-entry-symbol"><a class="doc-anchor" href="#custom-entry-symbol">§</a>Custom entry symbol</h2>
<p>There is usually no reason to, but you can use a different entry point (C function in the dynamic library). This must match the key
that you specify in the <code>.gdextension</code> file. Let’s say your <code>.gdextension</code> file has such a section:</p>
<div class="example-wrap"><pre class="language-toml"><code>[configuration]
entry_symbol = &quot;custom_name&quot;</code></pre></div>
<p>then you can implement the trait like this:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">struct </span>MyExtension;

<span class="attr">#[gdextension(entry_symbol = custom_name)]
</span><span class="kw">unsafe impl </span>ExtensionLibrary <span class="kw">for </span>MyExtension {}</code></pre></div>
<p>Note that this only changes the name. You cannot provide your own function – use the <a href="trait.ExtensionLibrary.html#method.on_level_init" title="associated function godot::init::ExtensionLibrary::on_level_init"><code>on_level_init()</code></a>
hook for custom startup logic.</p>
<h2 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h2>
<p>The library cannot enforce any safety guarantees outside Rust code, which means that <strong>you as a user</strong> are
responsible to uphold them: namely in GDScript code or other GDExtension bindings loaded by the engine.
Violating this may cause undefined behavior, even when invoking <em>safe</em> functions.</p>
</div></details><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.editor_run_behavior" class="method"><h4 class="code-header">fn <a href="#method.editor_run_behavior" class="fn">editor_run_behavior</a>() -&gt; <a class="enum" href="enum.EditorRunBehavior.html" title="enum godot::init::EditorRunBehavior">EditorRunBehavior</a></h4></section></summary><div class="docblock"><p>Determines if and how an extension’s code is run in the editor.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.min_level" class="method"><h4 class="code-header">fn <a href="#method.min_level" class="fn">min_level</a>() -&gt; InitLevel</h4></section></summary><div class="docblock"><p>Determines the initialization level at which the extension is loaded (<code>Scene</code> by default).</p>
<p>If the level is lower than [<code>InitLevel::Scene</code>], the engine needs to be restarted to take effect.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.on_level_init" class="method"><h4 class="code-header">fn <a href="#method.on_level_init" class="fn">on_level_init</a>(level: InitLevel)</h4></section></summary><div class="docblock"><p>Custom logic when a certain init-level of Godot is loaded.</p>
<p>This will only be invoked for levels &gt;= <a href="trait.ExtensionLibrary.html#method.min_level" title="associated function godot_core::init::ExtensionLibrary::min_level::min_level"><code>Self::min_level()</code></a>, in ascending order. Use <code>if</code> or <code>match</code> to hook to specific levels.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.on_level_deinit" class="method"><h4 class="code-header">fn <a href="#method.on_level_deinit" class="fn">on_level_deinit</a>(level: InitLevel)</h4></section></summary><div class="docblock"><p>Custom logic when a certain init-level of Godot is unloaded.</p>
<p>This will only be invoked for levels &gt;= <a href="trait.ExtensionLibrary.html#method.min_level" title="associated function godot_core::init::ExtensionLibrary::min_level::min_level"><code>Self::min_level()</code></a>, in descending order. Use <code>if</code> or <code>match</code> to hook to specific levels.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.override_hot_reload" class="method"><h4 class="code-header">fn <a href="#method.override_hot_reload" class="fn">override_hot_reload</a>() -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;</h4></section></summary><div class="docblock"><p>Whether to enable hot reloading of this library. Return <code>None</code> to use the default behavior.</p>
<p>Enabling this will ensure that the library can be hot reloaded. If this is disabled then hot reloading may still work, but there is no
guarantee. Enabling this may also lead to memory leaks, so it should not be enabled for builds that are intended to be final builds.</p>
<p>By default, this is enabled for debug builds and disabled for release builds.</p>
<p>Note that this is only checked <em>once</em> upon initializing the library. Changing this from <code>true</code> to <code>false</code> will be picked up as the
library is then fully reloaded upon hot-reloading, however changing it from <code>false</code> to <code>true</code> is almost certainly not going to work
unless hot-reloading is already working regardless of this setting.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/godot_core/init/trait.ExtensionLibrary.js" async></script></section></div></main></body></html>